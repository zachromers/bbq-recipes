<!-- Store Page -->

<section class="page-header">
    <h1 class="page-title">BBQ Store</h1>
    <p class="page-description">
        Shop for premium BBQ tools, rubs, sauces, wood pellets, and thermometers.
    </p>
</section>

<!-- Category Filter -->
<section class="store-filter">
    <div class="filter-buttons">
        <a href="/store" class="filter-btn <%= selectedCategory === 'all' ? 'active' : '' %>">
            All Products
        </a>
        <% allCategories.forEach(cat => { %>
            <a href="/store?category=<%= cat.id %>" class="filter-btn <%= selectedCategory === cat.id ? 'active' : '' %>">
                <span class="filter-icon"><%= cat.icon %></span>
                <%= cat.name %>
            </a>
        <% }) %>
    </div>
</section>

<!-- Product Categories -->
<% storeCategories.forEach(category => { %>
<section class="store-category" id="<%= category.id %>">
    <div class="category-header">
        <span class="category-header-icon"><%= category.icon %></span>
        <div class="category-header-text">
            <h2 class="section-title"><%= category.name %></h2>
            <p class="category-description"><%= category.description %></p>
        </div>
    </div>

    <div class="product-grid">
        <% category.products.forEach(product => { %>
        <article class="product-card">
            <a href="<%= product.affiliate %>" class="product-card-link" target="_blank" rel="noopener noreferrer">
                <div class="product-image">
                    <% if (product.badge) { %>
                        <span class="product-badge badge-<%= product.badge.toLowerCase().replace(' ', '-') %>"><%= product.badge %></span>
                    <% } %>
                    <% if (product.image) { %>
                        <img src="<%= product.image %>" alt="<%= product.name %>" class="product-actual-image" loading="lazy">
                    <% } else { %>
                        <div class="product-placeholder-image">
                            <%= category.icon %>
                        </div>
                    <% } %>
                </div>
                <div class="product-content">
                    <h3 class="product-title"><%= product.name %></h3>
                    <p class="product-description"><%= product.description %></p>
                    <div class="product-meta">
                        <div class="product-rating">
                            <span class="rating-stars">
                                <% for (let i = 1; i <= 5; i++) { %>
                                    <% if (i <= Math.floor(product.rating)) { %>
                                        <span class="star filled">★</span>
                                    <% } else if (i - 0.5 <= product.rating) { %>
                                        <span class="star half">★</span>
                                    <% } else { %>
                                        <span class="star">☆</span>
                                    <% } %>
                                <% } %>
                            </span>
                            <span class="rating-value"><%= product.rating %></span>
                            <span class="rating-count">(<%= product.reviews.toLocaleString() %>)</span>
                        </div>
                        <div class="product-price">$<%= product.price.toFixed(2) %></div>
                    </div>
                    <div class="product-cta">
                        <span class="btn btn-primary btn-sm">View on Amazon</span>
                    </div>
                </div>
            </a>
        </article>
        <% }) %>
    </div>
</section>
<% }) %>

<!-- Disclaimer -->
<section class="store-disclaimer">
    <p>
        <strong>Affiliate Disclosure:</strong> As an Amazon Associate, we earn from qualifying purchases.
        Product prices and availability are subject to change. We only recommend products we trust and believe will help you create amazing BBQ.
    </p>
</section>
